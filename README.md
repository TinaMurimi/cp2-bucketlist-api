# cp2-bucketlist-api

# What does this PR do?
Modelling a room allocation system for one of Andelaâ€™s facilities called Amity

# Building blocks
1. Python 3
2. Postgresql

# Setting up

**Prepare virtual environment**
* To install virtualenvwrapper, we will first install virtualenv

        $ pip install virtualenv
        $ pip install virtualenvwrapper

* Next, create a folder that will contain all your virtual environments:

        $ mkdir ~/.virtualenvs

* Open your .bashrc file and add:

        $ export WORKON_HOME=~/.virtualenvs
        $ source /usr/local/bin/virtualenvwrapper.sh

* You can activate these changes by typing

        $ source .bashrc

* Quit the current terminal and reopen it to execute the script and start working with virtualenvwrapper.

* To create a virtual environment

        $ mkvirtualenv --python=python3_path <environment_name>

* python3_path is the path of python3, which can be found with

        $ which python3

* To activate a virtual environment

        $ workon <environment_name>

* To deactivate it, just type:

        $ deactivate

* To delete a virtual environment

        $ rmvirtualenv <environment_name>

**Check out the project**

        $ git clone https://github.com/tinamorale/cp1-amity-allocation/

**Install requirements into virtualenvwrapper:**

        $ pip install -r requirements.txt

**Create a .env file:**

* Create the .env file in the root folder

        $ touch .env

* Add the following to the file
        ```
        workon <environment_name>
        export FLASK_APP="manage.py"
        export SECRET_KEY="Your secret key"
        export APP_SETTINGS="development"
        export SQLALCHEMY_DATABASE_URI="postgresql://postgres@localhost/bucketlist"
        ```

**To run the application**

* Install postman, a Google Chrome extension, then run:

        $ python manage.py runserver

**AN IMAGE HERE OF THE OUTPUT***

* In bucketlist/app/__init__.py, see all the URIs for different feature. Copy the URI in Postman, eg:
        ```
        http://127.0.0.1:5000/bucketlist_api/v1.0/auth/login
        ```

**AN IMAGE HERE OF THE OUTPUT***

**Deploying to Heroku**

* Create a Heroku account online

* Install the Heroku CLI. If using Mac OS X, run

        $ brew install heroku


* Log in using the email address and password you used when creating your Heroku account

        $ heroku login

* Create an app on Heroku, which prepares Heroku to receive your source code

        $ heroku apps:create <app_name>

* Create a Procfile in the root folder

        $ touch Procfile

* ..... and add the following

        ```
        web: gunicorn --workers 4 --bind "0.0.0.0:$PORT" flask_app:app --log-file -
        ```

* Create a runtime.txt file

        $ touch runtime.txt

* ..... and add the following

        ```
        python-3.6.0 
        ```

* Now deploy your code:

        $ git push heroku master

* If using a branch other than master:

        $ git push heroku <branch_name>:master

* The application is now deployed. Ensure that at least one instance of the app is runnin

        $ heroku ps:scale web=1

* Now visit the app at the URL generated by its app name. As a handy shortcut, you can open the website as follows:
        
        $ heroku open

**To run the test**
* Create a .coveragerc file

        $ touch .coveragerc

* Add the files you do not want covered. Eg.:
     ```
     [run]
     omit =
         psycopg2.py
         */psycopg2/*
         */flask_sqlalchemy/*
     ```

* Run the test:

        $ nosetests

* To check the coverage

        $ nosetests --with-coverage

# Project Demo
[https://asciinema.org/a/119230](url)

# Screenshots
This is a cli application. Run the main.py

<img width="863" alt="amity screenshot" src="https://cloud.githubusercontent.com/assets/26300276/25145960/19a00d42-247b-11e7-95e1-fda23e5be435.png">
